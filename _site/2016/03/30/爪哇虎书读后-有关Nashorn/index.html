<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>爪哇虎书读后 有关nashorn</title>
  <link rel="stylesheet" href="//fonts.useso.com/css?family=Source+Sans+Pro:300,300i,600">
  <link rel="stylesheet" href="/style.css">
  <!-- Begin Jekyll SEO tag v1.3.1 -->
<title>爪哇虎书读后 有关nashorn - Coup de Grace</title>
<meta property="og:title" content="爪哇虎书读后 有关nashorn" />
<meta name="description" content="  这本书过于基础,不适合购买" />
<meta property='og:description' content="  这本书过于基础,不适合购买" />
<link rel="canonical" href="http://www.slahser.com/2016/03/30/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3Nashorn/" />
<meta property='og:url' content='http://www.slahser.com/2016/03/30/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3Nashorn/' />
<meta property="og:site_name" content="Coup de Grace" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-03-30T00:00:00+08:00" />
<link rel="next" href="http://www.slahser.com/2016/03/31/osx%E4%B8%8A%E7%9A%84Surge%E4%B8%8ESS/" title="Osx上的surge与ss" />
<link rel="prev" href="http://www.slahser.com/2016/03/29/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3%E6%B3%9B%E5%9E%8B-%E5%8D%8F%E5%8F%98-%E9%80%86%E5%8F%98/" title="爪哇虎书读后 有关泛型 协变 逆变" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@S1ahs3r" />
<meta name="twitter:title" content="爪哇虎书读后 有关nashorn - Coup de Grace" />
<meta name="twitter:description" content="  这本书过于基础,不适合购买" />
<meta name="twitter:creator" content="@S1ahs3r" />
<script type="application/ld+json">
  {
    "@context" : "http://schema.org",


    "@type" : "BlogPosting",

    "headline": "爪哇虎书读后 有关nashorn",

    "datePublished": "2016-03-30T00:00:00+08:00",

    "description": "  这本书过于基础,不适合购买",


    "url" : "http://www.slahser.com/2016/03/30/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3Nashorn/"
  }
</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
  <div class="container">
    <header class="masthead">
  <h1 class="masthead-title--small">
    <a href="/">Coup de Grace</a>
  </h1>
</header>
<div class="content post">
  <h1 class="post-title">爪哇虎书读后 有关nashorn</h1>
  <div class="post-date">
    <time>30 Mar 2016</time>
  </div>
  <blockquote>
  <p>这本书过于基础,不适合购买
<img src="http://7xqjx7.com1.z0.glb.clouddn.com/image/tiger.jpeg?imageView2/2/h/200" alt="" /></p>
</blockquote>

<p>近些日子的工作恰巧有些crack的部分,涉及到java程序中调用一些js进行操作.</p>

<p>jdk8中更新了新一代的js引擎:Nashorn. 提供了些许语法糖与REPL和较大的性能提升,支持以类node的形式编写应用并运行在jvm上.</p>

<p>不过这些目前还用不到,按下不表.</p>

<p>我们用实例来示范一下简单的java内js函数调用,来<strong>实现一次字符串的加密</strong>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ScriptEngineManager</span> <span class="n">manager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ScriptEngineManager</span><span class="o">();</span>
<span class="n">ScriptEngine</span> <span class="n">engine</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="na">getEngineByName</span><span class="o">(</span><span class="s">"JavaScript"</span><span class="o">);</span>
<span class="c1">//ScriptEngine engine = manager.getEngineByName("Nashorn");</span>
<span class="k">try</span> <span class="o">{</span> 
    <span class="n">engine</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="n">Files</span><span class="o">.</span><span class="na">newBufferedReader</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/path/to/encrypt.js"</span><span class="o">),</span> <span class="n">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
    <span class="n">Invocable</span> <span class="n">inv</span> <span class="o">=</span> <span class="o">(</span><span class="n">Invocable</span><span class="o">)</span> <span class="n">engine</span><span class="o">;</span>
    <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">inv</span><span class="o">.</span><span class="na">invokeFunction</span><span class="o">(</span><span class="s">"encrypt"</span><span class="o">,</span> <span class="s">"str_u_want_encrypt"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ScriptException</span> <span class="o">|</span> <span class="n">IOException</span> <span class="o">|</span> <span class="n">NoSuchMethodException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>
</div>

<blockquote>
  <p>加密module各显神通~</p>
</blockquote>


</div>
  </div>
</body>
</html>
