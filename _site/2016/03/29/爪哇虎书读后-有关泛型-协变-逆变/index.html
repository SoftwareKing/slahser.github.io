<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>爪哇虎书读后 有关泛型 协变 逆变</title>
  <link rel="stylesheet" href="//fonts.useso.com/css?family=Source+Sans+Pro:300,300i,600">
  <link rel="stylesheet" href="/style.css">
  <!-- Begin Jekyll SEO tag v1.3.1 -->
<title>爪哇虎书读后 有关泛型 协变 逆变 - Coup de Grace</title>
<meta property="og:title" content="爪哇虎书读后 有关泛型 协变 逆变" />
<meta name="description" content="  这本书过于基础,不适合购买" />
<meta property='og:description' content="  这本书过于基础,不适合购买" />
<link rel="canonical" href="http://www.slahser.com/2016/03/29/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3%E6%B3%9B%E5%9E%8B-%E5%8D%8F%E5%8F%98-%E9%80%86%E5%8F%98/" />
<meta property='og:url' content='http://www.slahser.com/2016/03/29/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3%E6%B3%9B%E5%9E%8B-%E5%8D%8F%E5%8F%98-%E9%80%86%E5%8F%98/' />
<meta property="og:site_name" content="Coup de Grace" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-03-29T00:00:00+08:00" />
<link rel="next" href="http://www.slahser.com/2016/03/30/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3Nashorn/" title="爪哇虎书读后 有关nashorn" />
<link rel="prev" href="http://www.slahser.com/2016/03/29/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3gc/" title="爪哇虎书读后 有关gc" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@S1ahs3r" />
<meta name="twitter:title" content="爪哇虎书读后 有关泛型 协变 逆变 - Coup de Grace" />
<meta name="twitter:description" content="  这本书过于基础,不适合购买" />
<meta name="twitter:creator" content="@S1ahs3r" />
<script type="application/ld+json">
  {
    "@context" : "http://schema.org",


    "@type" : "BlogPosting",

    "headline": "爪哇虎书读后 有关泛型 协变 逆变",

    "datePublished": "2016-03-29T00:00:00+08:00",

    "description": "  这本书过于基础,不适合购买",


    "url" : "http://www.slahser.com/2016/03/29/%E7%88%AA%E5%93%87%E8%99%8E%E4%B9%A6%E8%AF%BB%E5%90%8E-%E6%9C%89%E5%85%B3%E6%B3%9B%E5%9E%8B-%E5%8D%8F%E5%8F%98-%E9%80%86%E5%8F%98/"
  }
</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
  <div class="container">
    <header class="masthead">
  <h1 class="masthead-title--small">
    <a href="/">Coup de Grace</a>
  </h1>
</header>
<div class="content post">
  <h1 class="post-title">爪哇虎书读后 有关泛型 协变 逆变</h1>
  <div class="post-date">
    <time>29 Mar 2016</time>
  </div>
  <blockquote>
  <p>这本书过于基础,不适合购买
<img src="http://7xqjx7.com1.z0.glb.clouddn.com/image/tiger.jpeg?imageView2/2/h/200" alt="" /></p>
</blockquote>

<h3 id="section">通过类型擦除来保证以下代码的兼容性:</h3>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">List</span> <span class="n">someThings</span> <span class="o">=</span> <span class="n">getSomething</span><span class="o">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strings</span> <span class="o">=</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;)</span> <span class="n">someThings</span><span class="o">;</span>
</code></pre>
</div>
<hr />

<h3 id="section-1">协变与逆变</h3>

<p>臭名昭著的<code class="highlighter-rouge">&lt;Scala编程&gt;</code>中译本彻底把这段讲到让人困惑.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;?&gt;</span> <span class="n">objects</span> <span class="o">=</span><span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span> <span class="c1">//让容器类型具有父子关系</span>
<span class="n">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">objects</span> <span class="o">=</span><span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span> <span class="c1">//协变</span>
<span class="n">List</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">objects</span> <span class="o">=</span><span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;();</span> <span class="c1">//逆变</span>
</code></pre>
</div>
<p>俗话说得好</p>

<blockquote>
  <p>Producer Extends ,Consumer Super.</p>
</blockquote>

<p>把方法视为一等公民时,则一个方法的定义同时具有生产者与消费者的身份</p>

<ul>
  <li>面向输出生产-&gt;使用extends-&gt;返回值协变-&gt;向上转型</li>
  <li>面向输入消费-&gt;使用super-&gt;参数逆变-&gt;方法重载</li>
</ul>

<p>反映到泛型里,恰似<code class="highlighter-rouge">&lt;java 核心编程&gt;</code>里的这一句</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">T</span> <span class="n">min</span><span class="o">(</span><span class="n">T</span><span class="o">[]</span> <span class="n">a</span><span class="o">)</span>
</code></pre>
</div>
<hr />


</div>
  </div>
</body>
</html>
